cmake_minimum_required(VERSION 3.20)
project(hashtable)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(obj_name ${PROJECT_NAME})
set(test_name test)

#add_compile_options(-Wall -Wextra -pedantic -Werror)
#add_compile_options(-fsanitize=address -Wall)
#add_link_options(-fsanitize=address)

add_library(corelib OBJECT src/ctors.cpp  src/hashtable.h  src/main.cpp  src/methods.cpp  src/operators.cpp)

add_executable(${obj_name} src/main.cpp)
target_link_libraries(${exe_name} corelib)

add_subdirectory(googletest)
add_subdirectory(test)
enable_testing()

set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

add_executable(${test_name} ctors_tests.cc  methods_tests.cc  operators_tests.cc)
target_link_libraries(${test_name} gtest_main)
target_link_libraries(${test_name} corelib)
